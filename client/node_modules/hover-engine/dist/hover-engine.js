function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),values=function(e){return Object.keys(e).map(function(n){return e[n]})},flatMap=function(e,n){return e.concat(n)},HoverEngine=function(){function e(){_classCallCheck(this,e),this.engine={},this.store={},this.actionQueue=[],this.listeners=[],this.actions={}}return _createClass(e,[{key:"addActions",value:function(e){var n=this,t=function(e,n){var t=n.name in e?e[n.name].concat(n):[n];return Object.assign({},e,_defineProperty({},n.name,t))};this.engine=Object.keys(e).map(function(e){return function(n){return values(e[n]).map(function(e){return e._storeKey=n,e})}}(e)).reduce(function(e,n){return values(n).reduce(t,e)},this.engine);this.store=Object.keys(e).map(function(n){return{key:n,init:e[n].init}}).reduce(function(e,n){return Object.assign({},e,_defineProperty({},n.key,n.init()))},this.store);var r=function(e,t){var r=0===n.actionQueue.length;for(n.actionQueue.push({actions:n.engine[e],args:t});r&&n.actionQueue.length>0;){var i=n.actionQueue[0],u=function(e){return function(t,r){return Object.assign({},t,_defineProperty({},r._storeKey,r(t[r._storeKey],e.args,n.actions)))}}(i);n.store=i.actions.reduce(u,n.store),n.actionQueue.shift(),n.notifyListeners(e,t)}};return this.actions=values(e).map(function(e){return Object.keys(e)}).reduce(flatMap,[]).reduce(function(e,n){return Object.assign({},e,_defineProperty({},n,function(e){return r(n,e)}))},this.actions),this}},{key:"addListener",value:function(e){return this.listeners.push(e),this}},{key:"notifyListeners",value:function(e,n){var t=this;return this.listeners.forEach(function(r){return r(t.store,t.actions,e,n)}),this}}]),e}();module.exports=HoverEngine;
//# sourceMappingURL=hover-engine.js.map
